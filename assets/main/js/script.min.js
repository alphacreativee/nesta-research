import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function sectionSolutions(){if(!($(".section-solutions").length<1)){let t=$(".section-solutions .solutions-list .item"),o=$(".section-solutions .solutions-bg .bg-item");t.on("mouseenter",function(){var e=$(this).data("tab");t.removeClass("active"),$(`.section-solutions .solutions-list .item[data-tab='${e}']`).addClass("active"),o.removeClass("active"),$(`.section-solutions .solutions-bg .bg-item[data-tab='${e}']`).addClass("active")})}}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let customEaseIn=CustomEase.create("custom-ease-in","0.47, 0.00, 0.49, 1.00"),customEaseIn2=CustomEase.create("custom-ease-in-2","0.17, 0.17, 0.34, 1.00"),columnWidth=30;function createColumns(t){var o=Math.ceil(t.offsetWidth/columnWidth);for(let e=0;e<o;e++){var a=document.createElement("div"),l=document.createElement("div");a.className="col",l.className="col__bg",a.appendChild(l),t.appendChild(a),gsap.set(a,{width:columnWidth,left:e*columnWidth})}}function photoBlockAnimation(e,t=0){createColumns(e);var o=e.querySelector(".photo"),a=e.querySelectorAll(".col__bg");gsap.set(o,{autoAlpha:1});let l=gsap.timeline({paused:!0});l.to(a,{width:0,duration:1,ease:customEaseIn,stagger:0}).to(o,{top:"-20%",duration:1.333,ease:customEaseIn2},0),ScrollTrigger.create({trigger:e,start:"top bottom-=10%",end:"bottom top-=10%",scrub:!0,onEnter:()=>l.play(),onEnterBack:()=>l.play()})}gsap.registerPlugin(CustomEase,Flip),CustomEase.create("osmo-ease","0.625, 0.05, 0, 1"),gsap.defaults({ease:"osmo-ease",duration:.725}),document.addEventListener("DOMContentLoaded",()=>{let n=document.querySelectorAll(".main-title__item"),c=document.querySelectorAll(".main-img__item"),u=document.querySelectorAll(".overlay-item"),d=document.querySelector(".overlay-nav"),m=document.querySelectorAll("[data-overlay='nav-item']");var e=document.querySelector("[data-overlay='close']");let s=document.querySelectorAll(".main-title"),p=null;function t(){if(p){var t=Array.from(n).indexOf(p);let e=u[t];var o=e.querySelector("[data-overlay='text-target'] .main-title"),a=e.querySelector("[data-overlay='img-target'] .image"),l=e.querySelector(".overlay-row"),r=Flip.getState(o,{props:"fontSize"}),i=Flip.getState(a);gsap.to(m,{yPercent:110,onComplete:()=>{d.style.display="none"}}),gsap.to(l,{autoAlpha:0,onComplete:()=>{e.style.display="none"}}),p.querySelector(".button").appendChild(o),c[t].appendChild(a),gsap.set(c[t],{autoAlpha:1}),Flip.from(r),Flip.from(i),p.classList.remove("active"),p=null,gsap.to(s,{yPercent:0,autoAlpha:1,delay:.3,stagger:.05})}}n.forEach((e,s)=>{e.addEventListener("click",()=>{return o=s,n.forEach(e=>e.classList.remove("active")),(p=n[o]).classList.add("active"),e=p.querySelector(".main-title"),t=Flip.getState(e,{props:"fontSize"}),a=c[o].querySelector(".image"),l=Flip.getState(a),r=(i=u[o]).querySelector(".overlay-row"),gsap.set(i,{display:"block",autoAlpha:110}),gsap.fromTo(r,{autoAlpha:0},{autoAlpha:1,delay:.5}),r=i.querySelector("[data-overlay='text-target']"),i=i.querySelector("[data-overlay='img-target']"),r.appendChild(e),i.appendChild(a),Flip.from(t),Flip.from(l),gsap.set(d,{display:"flex"}),gsap.fromTo(m,{yPercent:110},{yPercent:0,stagger:.1}),gsap.set(c,{autoAlpha:0}),void n.forEach((e,t)=>{t!==o&&(e=e.querySelector(".main-title"),gsap.to(e,{yPercent:100,autoAlpha:0,duration:.45,delay:.2-.05*t}))});var o,e,t,a,l,r,i})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&t()}),e.addEventListener("click",t),n.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{gsap.set(c,{autoAlpha:0}),gsap.set(c[t],{autoAlpha:1})})})});let init=()=>{gsap.registerPlugin(ScrollTrigger,CustomEase,Flip),sectionSolutions(),document.querySelectorAll(".photo-block").forEach((e,t)=>{photoBlockAnimation(e,t)}),document.querySelectorAll(".photo-block").forEach(e=>{var t=e.querySelector(".photo");gsap.fromTo(t,{y:"-10%"},{y:"10%",ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}})})},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});